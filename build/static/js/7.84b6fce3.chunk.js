(this.webpackJsonpgymsplat=this.webpackJsonpgymsplat||[]).push([[7],{472:function(e,a,t){"use strict";t.r(a);var l=t(14),s=t(15),r=t(17),n=t(16),o=t(0),c=t.n(o),m=t(19),i=t.n(m),u=t(440),d=t(99),p=t(437),h=t(33),E=t(29),f=t(447),g=t(448),w=t(50),y=t(10),N=t.n(y),b=t(43),v=t.n(b),P=function(e){Object(r.a)(t,e);var a=Object(n.a)(t);function t(){var e;return Object(l.a)(this,t),(e=a.call(this)).changeEmail=function(a){e.setState({email:a.target.value})},e.changeDisplayName=function(a){console.log(a.target.value),e.setState({displayName:a.target.value})},e.addProfilePic=function(a){e.setState({profilePic:a.target.value})},e.addPhoneNumber=function(a){e.setState({phoneNumber:a.target.value})},e.changePassword=function(a){console.log(a.target.value),e.setState({password:a.target.value})},e.confirmOldPass=function(a){e.setState({oldPassword:a.target.value})},e.confirmOldEmail=function(a){e.setState({oldEmail:a.target.value})},e.openModal=function(a){e.setState({openModal:!0})},e.closeModal=function(a){e.setState({openModal:!1})},e.openModalPassword=function(a){e.setState({openModalPassword:!0})},e.closeModalPassword=function(a){e.setState({openModalPassword:!1})},e.updateUserDisplayName=function(a){e.checkLoggedUser();var t=i.a.auth().currentUser;""!=e.state.displayName?t.updateProfile({displayName:e.state.displayName}).then((function(a){console.log(t),alert("Success!"),e.updateUserNameFB(e.state.displayName),e.setState({currentName:t.displayName})})).catch((function(e){alert(e.message)})):alert("Fill out a name.")},e.updateUserPassword=function(a){""!=e.state.password?(e.state.password==e.state.oldPassword&&alert("You cannot have the same password."),e.checkLoggedUser(),i.a.auth().signInWithEmailAndPassword(e.state.currentEmail,e.state.oldPassword).then((function(a){i.a.auth().currentUser.updatePassword(e.state.password.toString()).then((function(e){console.log(e),alert("Success!")}))})).catch((function(e){alert(e.message)}))):alert("Please fill out the field.")},e.updateUserEmail=function(a){""!=e.state.email?e.state.email!=e.state.currentEmail?i.a.auth().signInWithEmailAndPassword(e.state.currentEmail,e.state.oldPassword).then((function(a){i.a.auth().currentUser.updateEmail(e.state.email.toString()).then((function(a){alert("Success!"),e.setState({currentEmail:e.state.email})}))})).catch((function(e){alert(e.message)})):alert("You cannot use the same email."):alert("Fill out an email.")},e.state={currentUser:[],oldEmail:"",email:"",displayName:"",profilePic:"",oldPassword:"",phoneNumber:"",password:"",openModal:!1,openModalPassword:!1,checkUser:!0},e}return Object(s.a)(t,[{key:"updateUserNameFB",value:function(e){var a=i.a.database();a.ref("crc/users").on("value",(function(t){var l=i.a.auth().currentUser;a.ref("crc/users/"+l.uid).update({name:e})}))}},{key:"updateUserEmail",value:function(e){var a=i.a.database();a.ref("crc/users").on("value",(function(t){var l=i.a.auth().currentUser;console.log(l),a.ref("crc/users/"+l.uid).update({email:e})}))}},{key:"checkLoggedUser",value:function(){var e=this;i.a.auth().onAuthStateChanged((function(a){e.setState({currentName:a.displayName}),e.setState({currentEmail:a.email})}))}},{key:"componentDidMount",value:function(){this.checkLoggedUser()}},{key:"render",value:function(){return c.a.createElement(w.a,{title:"",breadcrumbs:[{name:"User Profile",active:!0}],className:"User Profile"},c.a.createElement(N.a,null,c.a.createElement("div",null,c.a.createElement("br",null),c.a.createElement("h1",{style:{fontFamily:"-apple-system, BlinkMacSystemFont",fontSize:"35px",fontWeight:"bold",color:"#0A0D18"}}," Update Profile "),c.a.createElement("br",null))),c.a.createElement(u.a,null,c.a.createElement(d.a,{lg:7,md:6,sm:6,xs:12},c.a.createElement(p.a,null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{style:{fontFamily:"BlinkMacSystemFont"}}," Email address"),c.a.createElement(h.a,{onChange:this.changeEmail,required:!0,className:"form-control",placeholder:"Enter email",email:"email"}),c.a.createElement(E.a,{onClick:this.openModal,className:"btn-block border-0",style:{color:"white"}}," Update ")),c.a.createElement(u.a,null,c.a.createElement(d.a,null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null," Display Name "),c.a.createElement(h.a,{onChange:this.changeDisplayName,placeholder:"Enter name"})),c.a.createElement(E.a,{onClick:this.updateUserDisplayName,className:"btn-block border-0",style:{color:"white"}}," Update ")),c.a.createElement(d.a,null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null," Enter new password "),c.a.createElement(h.a,{onChange:this.changePassword,id:"phone",name:"phone",type:"tel",required:!0,className:"form-control",placeholder:"Enter password"})),c.a.createElement(E.a,{onClick:this.openModalPassword,className:"btn-block border-0",style:{color:"white"}}," Update Password "))),c.a.createElement(u.a,null,c.a.createElement(d.a,null)),c.a.createElement(v.a,{classNames:{overlay:"customOverlay",modal:"customModal"},open:this.state.openModal,onClose:this.closeModal,center:!0},c.a.createElement("p",{className:"float-center"}," Please enter your password to confirm. "),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null," Password "),c.a.createElement(h.a,{onChange:this.confirmOldPass,id:"phone",name:"phone",type:"tel",required:!0,className:"form-control",placeholder:"Enter password"})),c.a.createElement(E.a,{onClick:this.updateUserEmail,className:"btn-block border-0",style:{color:"white"}}," Confirm Changes ")),c.a.createElement(v.a,{classNames:{overlay:"customOverlay",modal:"customModal"},open:this.state.openModalPassword,onClose:this.closeModalPassword,center:!0},c.a.createElement("p",{className:"float-center"}," Please enter your password to confirm. "),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null," Password "),c.a.createElement(h.a,{onChange:this.confirmOldPass,id:"phone",name:"phone",type:"tel",required:!0,className:"form-control",placeholder:"Enter password"}),c.a.createElement(E.a,{onClick:this.updateUserPassword,className:"btn-block border-0",style:{color:"white"}}," Confirm Changes "))),c.a.createElement("p",{className:"forgot-password text-right"}))),c.a.createElement(d.a,{lg:3,md:6,sm:6,xs:12},c.a.createElement("br",null),c.a.createElement(f.a,{style:{"border-radius":"2px",background:"white"}},c.a.createElement(g.a,null,c.a.createElement("div",{class:"card-body"},c.a.createElement("p",null," Current User "),c.a.createElement("p",null," Email: ",this.state.currentEmail," "),c.a.createElement("p",null," Name: ",this.state.currentName," ")))))))}}]),t}(c.a.Component);a.default=P}}]);
//# sourceMappingURL=7.84b6fce3.chunk.js.map