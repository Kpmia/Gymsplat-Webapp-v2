{"version":3,"sources":["pages/UpdateUserInfo.js"],"names":["UpdateUserInfo","_this","Object","_Users_kimiak_Desktop_gymsplatdashh2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_Users_kimiak_Desktop_gymsplatdashh2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_Users_kimiak_Desktop_gymsplatdashh2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","changeEmail","event","setState","email","target","value","changeDisplayName","console","log","displayName","addProfilePic","profilePic","addPhoneNumber","phoneNumber","changePassword","password","confirmOldPass","oldPassword","confirmOldEmail","oldEmail","openModal","closeModal","openModalPassword","closeModalPassword","updateUserDisplayName","checkLoggedUser","user","firebase","auth","currentUser","state","updateProfile","then","alert","updateUserNameFB","currentName","catch","error","message","updateUserPassword","signInWithEmailAndPassword","currentEmail","userCredential","updatePassword","toString","err","updateUserEmail","updateEmail","checkUser","nameone","database","ref","on","uid","update","name","emailone","_this2","onAuthStateChanged","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","components_Page__WEBPACK_IMPORTED_MODULE_14__","title","breadcrumbs","active","className","react_fade_in__WEBPACK_IMPORTED_MODULE_15___default","style","fontFamily","fontSize","fontWeight","color","reactstrap__WEBPACK_IMPORTED_MODULE_7__","reactstrap__WEBPACK_IMPORTED_MODULE_8__","lg","md","sm","xs","reactstrap__WEBPACK_IMPORTED_MODULE_9__","reactstrap__WEBPACK_IMPORTED_MODULE_10__","onChange","required","placeholder","reactstrap__WEBPACK_IMPORTED_MODULE_11__","onClick","id","type","react_responsive_modal__WEBPACK_IMPORTED_MODULE_16___default","classNames","overlay","modal","open","onClose","center","reactstrap__WEBPACK_IMPORTED_MODULE_12__","border-radius","background","reactstrap__WEBPACK_IMPORTED_MODULE_13__","class","React","Component"],"mappings":"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","file":"static/js/7.ab59df25.chunk.js","sourcesContent":["import React from 'react';\nimport firebase from 'firebase';\nimport { Button, Label, Input, Col, Row, Card, CardBody, Form } from 'reactstrap';\nimport Page from 'components/Page';\nimport FadeIn from 'react-fade-in';\nimport Modal from 'react-responsive-modal'\n\n\n\n\n\nclass UpdateUserInfo extends React.Component {\n\n    constructor() {\n        super();\n        this.state={\n            currentUser: [],\n            oldEmail: '',\n            email: '',\n            displayName: '',\n            profilePic: '',\n            oldPassword: '',\n            phoneNumber: '',\n            password: '',\n            openModal: false,\n            openModalPassword: false,\n            checkUser: true\n        }\n    }\n\n    changeEmail = event => {\n        this.setState({ email : event.target.value })\n    }\n\n    changeDisplayName = event => {\n        console.log(event.target.value)\n        this.setState({ displayName : event.target.value })\n    }\n\n    addProfilePic = event => {\n        this.setState({ profilePic : event.target.value })\n    }\n\n    addPhoneNumber = event => {\n        this.setState({ phoneNumber : event.target.value })\n    }\n\n    changePassword = event => {\n        console.log(event.target.value)\n        this.setState({ password : event.target.value })\n    }\n\n    confirmOldPass = event => {\n        this.setState({ oldPassword : event.target.value })\n    }\n\n    confirmOldEmail = event => {\n        this.setState({ oldEmail : event.target.value })\n    }\n\n    openModal = event => {\n        this.setState({ openModal : true })\n    }\n    \n    closeModal = event => {\n        this.setState({ openModal : false })\n    }\n\n    openModalPassword = event => {\n        this.setState({ openModalPassword : true })\n    }\n\n    closeModalPassword = event => {\n        this.setState({ openModalPassword : false })\n    }\n\n    updateUserNameFB(nameone) {\n        const database = firebase.database();\n\n        database.ref('crc/users').on('value', event => {\n\n            let currentUser = firebase.auth().currentUser\n\n            database.ref('crc/users/' + currentUser.uid).update({\n                name: nameone\n            })\n        })\n    }\n\n\n    updateUserEmail(emailone) {\n        const database = firebase.database();\n\n        database.ref('crc/users').on('value', event => {\n\n            let currentUser = firebase.auth().currentUser\n\n            console.log(currentUser)\n\n            database.ref('crc/users/' + currentUser.uid).update({\n                email: emailone\n            })\n        })\n    }\n\n    checkLoggedUser() {\n\n        firebase.auth().onAuthStateChanged(event => {\n            if (true) {\n                this.setState({ currentName : event.displayName })\n                this.setState({ currentEmail : event.email })\n                \n            } else {\n              console.log('none')\n            }\n          });\n    }\n\n    updateUserDisplayName = event => {\n\n        this.checkLoggedUser();\n\n        var user = firebase.auth().currentUser;\n\n        if (this.state.displayName == \"\") {\n            alert('Fill out a name.')\n            return;\n        }\n\n        user.updateProfile({\n            displayName: this.state.displayName\n            }).then(event => {\n                console.log(user)\n                alert('Success!')\n                this.updateUserNameFB(this.state.displayName)\n                this.setState({ currentName : user.displayName })\n\n            }).catch(function(error) {\n                alert(error.message)\n                return;\n            });\n    }\n\n    updateUserPassword = event => {\n\n        if (this.state.password == \"\") {\n            alert('Please fill out the field.')\n            return;\n        }\n        if (this.state.password == this.state.oldPassword) {\n            alert('You cannot have the same password.')\n        }\n\n        this.checkLoggedUser();\n\n        firebase.auth().signInWithEmailAndPassword(this.state.currentEmail, this.state.oldPassword)\n        .then(userCredential => {\n\n            var user = firebase.auth().currentUser\n\n            user.updatePassword(\n                this.state.password.toString()\n            ) .then (event => {\n                console.log(event)\n                alert('Success!')\n                return;\n            })\n        })  .catch ( err => {\n            alert(err.message)\n            return;\n        })\n    }\n\n    updateUserEmail = event => {\n        if (this.state.email == \"\") {\n            alert('Fill out an email.')\n            return;\n        }\n        if (this.state.email == this.state.currentEmail) {\n            alert('You cannot use the same email.')\n            return;\n        }\n\n        firebase.auth().signInWithEmailAndPassword(this.state.currentEmail, this.state.oldPassword)\n        .then(userCredential => {\n\n            var user = firebase.auth().currentUser\n            \n            \n            user.updateEmail(\n                this.state.email.toString()\n            ) .then(event => {\n                alert('Success!')\n                this.setState({ currentEmail : this.state.email })\n                return;\n   \n            })})\n        .catch(err => {\n             alert(err.message)\n             return;\n        })\n    }\n\n\n    componentDidMount() {\n        this.checkLoggedUser()\n\n    }\n    render() {\n\n\n        return (\n\n            <Page title= \"\" breadcrumbs={[{ name: 'User Profile', active: true }]} className=\"User Profile\" >\n\n\n                        <FadeIn>\n                        <div>\n                    <br></br>\n                        <h1 style={{'fontFamily': '-apple-system, BlinkMacSystemFont', 'fontSize': '35px', 'fontWeight': 'bold', 'color': '#0A0D18'}}> Update Profile </h1>\n                        <br></br>\n                        </div>\n                        </FadeIn>\n\n                <Row>\n\n                <Col lg={7} md={6} sm={6} xs={12} >\n\n\n                <Form> \n                 <div className=\"form-group\">\n                     <label style={{'fontFamily': 'BlinkMacSystemFont'}}> Email address</label>\n                     <Input  onChange={this.changeEmail} required className=\"form-control\" placeholder=\"Enter email\" email=\"email\" />\n\n                     <Button onClick={this.openModal} className=\"btn-block border-0\" style={{'color': 'white'}}> Update </Button>\n\n                     </div>\n\n\n\n                 <Row>\n                  <Col>\n                  <div className=\"form-group\">\n                     <label> Display Name </label>\n                     <Input  onChange={this.changeDisplayName}   placeholder=\"Enter name\" />\n                 </div>\n                     <Button onClick={this.updateUserDisplayName} className=\"btn-block border-0\" style={{'color': 'white'}}> Update </Button>\n                 </Col>\n                 <Col>\n\n                 <div className=\"form-group\">\n                     <label> Enter new password </label>\n                     <Input onChange={this.changePassword} id=\"phone\" name=\"phone\" type=\"tel\" required className=\"form-control\" placeholder=\"Enter password\" />\n                 </div>\n\n                 <Button onClick={this.openModalPassword} className=\"btn-block border-0\" style={{'color': 'white'}}> Update Password </Button>\n\n\n\n                 </Col>\n                 </Row>\n\n                 <Row>\n\n                <Col>\n\n\n                 </Col>\n                 </Row>\n\n                 <Modal \n                        classNames={{\n                        overlay: 'customOverlay',\n                        modal: 'customModal',\n                        }} open={this.state.openModal} onClose={this.closeModal} center>\n\n\n                        <p className=\"float-center\"> Please enter your password to confirm. </p>\n\n                        <div className=\"form-group\">\n                            <label> Password </label>\n                            <Input onChange={this.confirmOldPass} id=\"phone\" name=\"phone\" type=\"tel\" required className=\"form-control\" placeholder=\"Enter password\" />\n                        </div>\n\n                        <Button onClick={this.updateUserEmail} className=\"btn-block border-0\" style={{'color': 'white'}}> Confirm Changes </Button>\n\n                            \n                </Modal>\n\n                <Modal \n                        classNames={{\n                        overlay: 'customOverlay',\n                        modal: 'customModal',\n                        }} open={this.state.openModalPassword} onClose={this.closeModalPassword} center>\n\n\n                        <p className=\"float-center\"> Please enter your password to confirm. </p>\n\n                        <div className=\"form-group\">\n                            <label> Password </label>\n                            <Input onChange={this.confirmOldPass} id=\"phone\" name=\"phone\" type=\"tel\" required className=\"form-control\" placeholder=\"Enter password\" />\n                            <Button onClick={this.updateUserPassword} className=\"btn-block border-0\" style={{'color': 'white'}}> Confirm Changes </Button>\n                        </div>\n\n                </Modal>\n\n                 <p className=\"forgot-password text-right\">\n                 </p>\n\n                 </Form>\n                 </Col>\n\n                 <Col lg={3} md={6} sm={6} xs={12} >\n\n                <br></br>\n\n                <Card style={{'border-radius': '2px', 'background': 'white'}}>\n                 <CardBody>\n                 <div class=\"card-body\">\n                    <p > Current User </p>\n                    <p > Email: {this.state.currentEmail} </p>\n                    <p> Name: {this.state.currentName} </p>\n\n\n\n                </div>\n                 </CardBody>\n             </Card>  \n\n                 </Col>\n\n                 </Row>\n            </Page>\n        )\n    }\n}\n\nexport default UpdateUserInfo;"],"sourceRoot":""}